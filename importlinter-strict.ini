[importlinter]
root_package = immich_autotag
include_external_packages = True

# STRICT level: Maximum architectural enforcement
# Includes all TARGET contracts plus strictest rules

# ============================================================================
# STANDARD CONTRACTS (Critical architectural boundaries)
# ============================================================================

[importlinter:contract:logging_proxy_only_accesses_immich_proxy]
name = Only logging_proxy can access immich_proxy
type = forbidden
source_modules =
    immich_autotag
forbidden_modules =
    immich_autotag.api.immich_proxy

[importlinter:contract:immich_proxy_only_accesses_client]
name = Only immich_proxy can access immich_client
type = forbidden
source_modules =
    immich_autotag
forbidden_modules =
    immich_client

# ============================================================================
# TARGET CONTRACTS (Additional module isolation)
# ============================================================================

[importlinter:contract:only_logging_proxy_imports_immich_proxy]
name = Only logging_proxy should import immich_proxy modules
type = forbidden
source_modules =
    immich_autotag.assets
    immich_autotag.albums
    immich_autotag.tags
forbidden_modules =
    immich_autotag.api.immich_proxy.assets
    immich_autotag.api.immich_proxy.search
    immich_autotag.api.immich_proxy.tags
    immich_autotag.api.immich_proxy.albums
    immich_autotag.api.immich_proxy.server

# ============================================================================
# STRICT CONTRACTS (Future: add even stricter rules here)
# ============================================================================
# Add additional strict contracts as your architecture evolves
