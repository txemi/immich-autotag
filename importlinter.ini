[importlinter]
root_package = immich_autotag

[contract:only_proxy_imports_immich_client]
type = forbidden
source_modules =
    immich_autotag
forbidden_modules =
    immich_client
ignore_imports =
    immich_autotag.api.immich_proxy -> immich_client

[contract:only_immich_proxy_accesses_immich_client]
type = layers
layers =
    api
    client
api = immich_autotag.api.immich_proxy
client = immich_client
