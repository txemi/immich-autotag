[contract:asset_cache_entry_no_imports]
type = forbidden
source_modules =
    immich_autotag.assets.asset_cache_entry
forbidden_modules =
    immich_autotag.assets.asset_manager
    immich_autotag.assets.asset_response_wrapper
    immich_autotag.albums.album_collection_wrapper

[contract:asset_response_wrapper_no_manager_or_album]
type = forbidden
source_modules =
    immich_autotag.assets.asset_response_wrapper
forbidden_modules =
    immich_autotag.assets.asset_manager
    immich_autotag.albums.album_collection_wrapper

[contract:asset_manager_no_album_collection]
type = forbidden
source_modules =
    immich_autotag.assets.asset_manager
forbidden_modules =
    immich_autotag.albums.album_collection_wrapper
[importlinter]
root_package = immich_autotag

[contract:only_proxy_imports_immich_client]
type = forbidden
source_modules =
    immich_autotag
forbidden_modules =
    immich_client
ignore_imports =
    immich_autotag.api.immich_proxy -> immich_client

[contract:only_immich_proxy_accesses_immich_client]
type = layers
layers =
    api
    client
api = immich_autotag.api.immich_proxy
client = immich_client
