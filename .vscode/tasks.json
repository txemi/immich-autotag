{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Setup Python Virtual Environment",
      "type": "shell",
      "command": "bash setup_venv.sh",
      "group": { "kind": "build" },
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    {
      "label": "Run Application (main.py)",
      "type": "shell",
      "command": "bash run_app.sh",
      "group": "build",
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    {
      "label": "Quality Gate: Python (CHECK)",
      "type": "shell",
      "command": "bash scripts/devtools/quality_gate_py/venv_launcher.sh --mode CHECK --level STANDARD",
      "group": { "kind": "build" },
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    {
      "label": "Quality Gate: Python (APPLY)",
      "type": "shell",
      "command": "bash scripts/devtools/quality_gate_py/venv_launcher.sh --mode APPLY --level STANDARD",
      "group": { "kind": "build" },
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    {
      "label": "Quality Gate: Check Only (CHECK)",
      "type": "shell",
      "command": "bash scripts/devtools/quality_gate.sh --level=STANDARD --mode=CHECK",
      "presentation": { "reveal": "always", "panel": "shared" },
      "group": { "kind": "build" },
      "problemMatcher": []
    },
    {
      "label": "Quality Gate: Format & Fix (APPLY)",
      "type": "shell",
      "command": "bash scripts/devtools/quality_gate.sh --level=STANDARD --mode=APPLY",
      "group": { "kind": "build" },
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    {
      "label": "Quality Gate: Format+Check (APPLY+CHECK)",
      "type": "shell",
      "command": "bash scripts/devtools/quality_gate.sh --level=STANDARD --mode=APPLY && bash scripts/devtools/quality_gate.sh --level=STANDARD --mode=CHECK",
      "group": { "kind": "build" },
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    {
      "label": "Quality Gate: Check (TARGET)",
      "type": "shell",
      "command": "bash scripts/devtools/quality_gate.sh --level=TARGET --mode=CHECK",
      "group": { "kind": "build" },
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    },
    {
      "label": "Quality Gate: Lint (Flake8)",
      "type": "shell",
      "command": "./.venv/bin/python -m flake8 --exclude=.venv,immich-client,scripts immich_autotag",
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": ["$python"]
    },
    {
      "label": "Quality Gate: MYPY Only (CHECK)",
      "type": "shell",
      "command": "bash scripts/devtools/quality_gate.sh --level=STANDARD --mode=CHECK --only-check=check_mypy",
      "group": { "kind": "build" },
      "presentation": { "reveal": "always", "panel": "shared" },
      "problemMatcher": []
    }
  ]
}
