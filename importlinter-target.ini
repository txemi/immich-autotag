[importlinter]
root_package = immich_autotag
include_external_packages = True

# TARGET level: Stricter architectural enforcement
# Includes all STANDARD contracts plus additional module isolation rules

# ============================================================================
# STANDARD CONTRACTS (Critical architectural boundaries)
# ============================================================================


[importlinter:contract:only_proxy_imports_client]
name = Only immich_proxy can import immich_client (STANDARD rule)
type = forbidden
source_modules = immich_autotag.*
forbidden_modules = immich_client
ignore_imports = immich_autotag.api.immich_proxy* -> immich_client

[importlinter:contract:only_logging_proxy_imports_proxy]
name = Only logging_proxy can import immich_proxy (TARGET rule)
type = forbidden
source_modules = immich_autotag.*
forbidden_modules = immich_autotag.api.immich_proxy*
ignore_imports = immich_autotag.api.logging_proxy* -> immich_autotag.api.immich_proxy*

